<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Line Follower Robot | Kilan Rougeot</title>
    <link rel="icon" type="image/png" href="../Pics/webicon.png">
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Additional styles for detail pages */
        .detail-hero {
            padding-top: 120px;
            padding-bottom: var(--spacing-lg);
        }

        .detail-hero h1 {
            font-size: 3rem;
            color: var(--color-accent);
            margin-bottom: var(--spacing-sm);
        }

        .detail-meta {
            color: var(--color-text-secondary);
            font-size: 1.125rem;
            margin-bottom: var(--spacing-md);
        }

        .detail-content {
            max-width: 900px;
            margin: 0 auto;
            padding-bottom: var(--spacing-xl);
        }

        .detail-content h2 {
            font-size: 2rem;
            color: var(--color-accent);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            border-bottom: 3px solid var(--color-accent);
            display: inline-block;
            padding-bottom: 0.5rem;
        }

        .detail-content h3 {
            font-size: 1.5rem;
            color: var(--color-accent);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        .detail-content p {
            font-size: 1.125rem;
            line-height: 1.8;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-md);
        }

        .detail-content ul {
            margin-left: 2rem;
            margin-bottom: var(--spacing-md);
        }

        .detail-content li {
            font-size: 1.125rem;
            line-height: 1.8;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-xs);
        }

        .detail-image {
            margin: var(--spacing-lg) 0;
            border-radius: var(--border-radius);
            overflow: hidden;
            background: var(--color-accent-light);
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-text-secondary);
            font-size: 1.125rem;
            border: 2px dashed var(--color-border);
        }

        .back-link {
            display: inline-block;
            margin-bottom: var(--spacing-md);
            color: var(--color-accent);
            font-weight: 600;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .video-container {
            margin: var(--spacing-lg) 0;
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            border-radius: var(--border-radius);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        code {
            background: var(--color-accent-light);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.95rem;
        }

        pre {
            background: var(--color-accent-light);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            overflow-x: auto;
            margin: var(--spacing-md) 0;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo">KILAN ROUGEOT</a>
            <ul class="nav-menu">
                <li><a href="../index.html#home" class="nav-link">Home</a></li>
                <li><a href="../index.html#experience" class="nav-link">Experience</a></li>
                <li><a href="../index.html#teams" class="nav-link">Teams</a></li>
                <li><a href="../index.html#projects" class="nav-link">Projects</a></li>
                <li><a href="../Files/Resume - Kilan Rougeot Latest .pdf" class="nav-link" target="_blank">Resume</a></li>
                <li><a href="../contact.html" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Project Detail -->
    <section class="detail-hero">
        <div class="container">
            <a href="../index.html#projects" class="back-link">← Back to Projects</a>
            <h1>Line-Following Robot with Closed-Loop Control</h1>
            <p class="detail-meta">DC Motor Control Project • October 2024 • Team: Dhvan Shah & Kilan Rougeot</p>
        </div>
    </section>

    <section class="detail-content">
        <div class="container">
            <!-- Video Demo -->
            <div class="video-container">
                <iframe
                    src="https://www.youtube.com/embed/BfBkejzWG-k"
                    title="Line Follower Robot Demo"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>

            <!-- Overview -->
            <h2>Project Overview</h2>
            <p>
                This project integrated sensing and control with a two-wheeled robotic platform to autonomously follow a taped track on the floor. The system uses a closed-loop PD controller on an Arduino that can navigate a non-circular loop course. A key requirement was the ability to tune the controller and adjust robot performance in real-time via serial communication, without recompiling code, to achieve the fastest possible run times.
            </p>

            <!-- Image 1: Robot Overview -->
            <div class="detail-image">
                [Add robot assembled image here - 1200x600px recommended]
            </div>

            <!-- Approach -->
            <h2>Design Approach</h2>
            <p>
                We designed a custom chassis to precisely control wheel-to-wheel distances, sensor placements and heights, and other design elements that would optimize our code's performance. We implemented a proportional-derivative (PD) control scheme using five infrared sensors:
            </p>
            <ul>
                <li><strong>Three center sensors:</strong> Positioned close together for main line following</li>
                <li><strong>Two outer sensors:</strong> Positioned further out and less far forward for sharp corner detection</li>
            </ul>
            <p>
                The control algorithm stays centered on the line using the main sensors, only using the far sensors when the main sensors lose sight of the line. This approach enabled fast line following with consistent sharp corner navigation.
            </p>

            <!-- Image 2: System Architecture -->
            <div class="detail-image">
                [Add system architecture diagram here showing data/power flow]
            </div>

            <!-- Mechanical Design -->
            <h2>Mechanical Design</h2>

            <h3>Chassis Configuration</h3>
            <p>
                Our mechanical design focused on creating a stable, balanced platform. We positioned the motors and wheels in the back to maximize sensor turning radius and concentrate weight over the drive wheels for better traction. The chassis measures 5 inches wide by 6.5 inches long and uses a three-point contact system:
            </p>
            <ul>
                <li>Two driven wheels in the back for propulsion</li>
                <li>One caster wheel in the front for balance</li>
                <li>Sloped design to accommodate caster wheel without interference</li>
                <li>Adjustable sensor height using caster wheel spacers</li>
            </ul>

            <!-- Image 3: CAD Design -->
            <div class="detail-image">
                [Add CAD chassis design image showing labeled components]
            </div>

            <h3>Sensor Array Evolution</h3>
            <p>
                Initially, we used three sensors positioned close together in the center. However, this design failed at sharp turns greater than 90 degrees because the sensors couldn't see the line during tight corners. To solve this, we added one sensor on each side, positioned slightly further back, to detect the line when the center sensors lost contact.
            </p>
            <p>
                The sensors were positioned with 8mm spacing between the three center sensors - slightly wider than the tape. This made programming easier: when perfectly following the line, the middle sensor sees full tape color while the side sensors only partially see the line.
            </p>

            <!-- Image 4: Sensor Mounting -->
            <div class="detail-image">
                [Add detailed sensor mounting image showing 5-sensor configuration]
            </div>

            <!-- Electronics -->
            <h2>Electronic Design</h2>

            <h3>Component Specifications</h3>
            <ul>
                <li><strong>Infrared Sensors:</strong> TCRT5000 with analog voltage output (0-5V)</li>
                <li><strong>Motors:</strong> 3-7.2V DC gearmotors, 210 RPM, 48:1 gear ratio, driven at 12V</li>
                <li><strong>Microcontroller:</strong> Arduino Uno with ATmega328P</li>
                <li><strong>Motor Control:</strong> Adafruit Motor Shield v2.3 with PWM speed control</li>
                <li><strong>Power:</strong> 12V wall adapter split between Arduino and Motor Shield</li>
            </ul>

            <!-- Image 5: Circuit Diagram -->
            <div class="detail-image">
                [Add complete circuit schematic image]
            </div>

            <h3>Sensor Circuit</h3>
            <p>
                Each IR reflectance sensor includes:
            </p>
            <ul>
                <li>IR LED with 200Ω current-limiting resistor (~15mA current)</li>
                <li>Phototransistor with 10kΩ pull-up resistor</li>
                <li>Analog voltage output proportional to surface reflectivity</li>
            </ul>

            <!-- Control System -->
            <h2>Control System Design</h2>

            <h3>PD Control Algorithm</h3>
            <p>
                We implemented a Finite State Machine (FSM) with two primary states:
            </p>
            <ul>
                <li><strong>PD Control State:</strong> Active when center sensors detect the line</li>
                <li><strong>Line Search State:</strong> Active when center sensors lose the line, uses outer sensors to reacquire</li>
            </ul>

            <p>
                The PD controller calculates an error signal and applies proportional and derivative corrections:
            </p>
            <pre>ERROR = (LEFT_READING - RIGHT_READING)
CORRECTION = Kp * ERROR + Kd * (ERROR - LAST_ERROR)
LEFT_SPEED = BASE_SPEED + CORRECTION
RIGHT_SPEED = BASE_SPEED - CORRECTION</pre>

            <h3>Tuned Parameters</h3>
            <ul>
                <li><strong>Kp (Proportional Gain):</strong> 10 - provides immediate response to error</li>
                <li><strong>Kd (Derivative Gain):</strong> 15 - provides damping to reduce oscillation</li>
                <li><strong>Base Speed:</strong> 50 (0-255 PWM range)</li>
            </ul>

            <!-- Image 6: GUI Interface -->
            <div class="detail-image">
                [Add Python GUI screenshot showing real-time sensor plots and parameter sliders]
            </div>

            <!-- Real-Time Tuning -->
            <h2>Real-Time Parameter Tuning</h2>
            <p>
                We created a Python GUI with serial communication that enabled runtime parameter adjustment without code recompilation. The interface features:
            </p>
            <ul>
                <li>Real-time normalized IR sensor readings plotted over time</li>
                <li>Adjustable sliders for Kp, Kd, and motor speeds</li>
                <li>Bidirectional serial protocol for sending commands and receiving sensor data</li>
            </ul>
            <p>
                This dramatically accelerated the tuning process, allowing us to optimize performance through rapid iteration.
            </p>

            <!-- Image 7: Sensor Data Plot -->
            <div class="detail-image">
                [Add time-series plot showing sensor readings and motor commands]
            </div>

            <!-- Results -->
            <h2>Performance Results</h2>
            <ul>
                <li><strong>Best Lap Time:</strong> 30 seconds</li>
                <li><strong>Success Rate:</strong> 15/15 attempts (100%)</li>
                <li><strong>Sensor Calibration:</strong> Highly reliable across different surfaces</li>
                <li><strong>Sharp Corner Handling:</strong> Successfully navigates turns >90 degrees</li>
            </ul>

            <!-- Challenges & Solutions -->
            <h2>Challenges Overcome</h2>

            <h3>Challenge 1: Sharp Corners</h3>
            <p>
                <strong>Problem:</strong> Sharp corners (especially the "armpit") caused the 3-sensor design to lose the line.
            </p>
            <p>
                <strong>Solution:</strong> Added 2 outer sensors and implemented FSM to detect and correct for line loss.
            </p>

            <h3>Challenge 2: Prototype Iteration</h3>
            <p>
                <strong>Problem:</strong> Initial solderable breadboard made component changes difficult.
            </p>
            <p>
                <strong>Solution:</strong> Switched to solderless breadboard for rapid prototyping, then planned PCB for final version.
            </p>

            <h3>Challenge 3: Parameter Tuning Speed</h3>
            <p>
                <strong>Problem:</strong> Recompiling and re-uploading code for each tuning adjustment was time-consuming.
            </p>
            <p>
                <strong>Solution:</strong> Developed Python GUI with serial communication for real-time parameter adjustment.
            </p>

            <!-- Key Learnings -->
            <h2>Key Learnings</h2>
            <ul>
                <li><strong>Calibration is Critical:</strong> Thorough sensor calibration resulted in reliable operation</li>
                <li><strong>Iterative Design:</strong> Rapid chassis iteration enabled optimization of sensor locations</li>
                <li><strong>Real-Time Tools:</strong> GUI dramatically improved tuning efficiency over code recompilation</li>
                <li><strong>State Machines:</strong> FSM approach cleanly separated normal operation from corner handling</li>
            </ul>

            <!-- Technical Specifications -->
            <h2>Technical Specifications</h2>
            <ul>
                <li><strong>Dimensions:</strong> 5" W × 6.5" L chassis</li>
                <li><strong>Sensors:</strong> 5× TCRT5000 IR reflectance sensors</li>
                <li><strong>Sensor Height:</strong> 5mm above ground (optimized via testing)</li>
                <li><strong>Sensor Spacing:</strong> 8mm between center sensors</li>
                <li><strong>Motors:</strong> 2× DC gearmotors, 210 RPM, 48:1 ratio</li>
                <li><strong>Control Frequency:</strong> ~100 Hz (10ms loop time)</li>
                <li><strong>Power:</strong> 12V DC supply</li>
            </ul>

            <!-- Image 8: Final Robot -->
            <div class="detail-image">
                [Add final assembled robot image with wiring]
            </div>

            <!-- Link back -->
            <a href="../index.html#projects" class="btn btn-secondary" style="margin-top: var(--spacing-md);">
                ← Back to All Projects
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container" style="text-align: center;">
            <p style="font-size: 0.9rem; color: var(--color-text-secondary);">&copy; 2024 Kilan Rougeot</p>
        </div>
    </footer>

    <script src="../script.js"></script>
</body>
</html>
